<div class="max-w-2xl mx-auto bg-white p-6 shadow-md rounded-xl mt-10 text-center">
  <!-- Book Cover Image -->
  <div class="mb-4">
    <%= image_tag(@book.image_url || "default_book_cover.jpg", alt: @book.title, class: "w-64 h-80 object-cover mx-auto rounded-xl shadow") %>
  </div>

  <!-- Book Details -->
  <h1 class="text-3xl font-bold mb-2"><%= @book.title %></h1>
  <p class="text-gray-700 text-lg"><strong>Author:</strong> <%= @book.author %></p>
  <p class="text-gray-700 text-lg"><strong>ISBN:</strong> <%= @book.isbn %></p>

  <!-- Book Description -->
  <p class="mt-4 text-gray-600 italic text-md">
    <%= @book.description.presence || "No description available for this book." %>
  </p>

  <!-- Availability Status -->
  <p class="mt-4 text-lg font-semibold mb-6">
    <% if @book.available? %>
      <span class="text-green-600">✅ Available</span>
    <% else %>
      <span class="text-red-600">❌ Borrowed</span>
    <% end %>
  </p>


  <!-- Buttons -->
  <div class="mt-6 flex justify-center space-x-4">
    <% if @book.available? %>
      <% if Current.user.borrows.where(returned_at: nil).exists? %>
        <!-- Button when user has an unreturned book -->
        <button onclick="alert('You must return your current book before borrowing another one.')" 
            class="bg-green-500 text-white px-4 py-2 rounded-xl shadow-md font-bold cursor-not-allowed">
          Borrow Book
        </button>
      <% else %>
        <!-- Normal Borrow Button with Confirmation -->
        <button onclick="if(confirm('Are you sure you want to borrow this book?')) { this.nextElementSibling.submit(); }"
          class="bg-green-500 text-white px-4 py-2 rounded-xl shadow-md font-bold">
          Borrow Book
        </button>

        <%= form_with url: book_borrow_path(@book), method: :post, style: "display: none;" do %>
        <% end %>
      <% end %>  
    <% end %>
    &nbsp;
    <%= link_to "Edit", edit_book_path(@book), class: "px-4 py-2 bg-red-500 font-bold text-white rounded-xl shadow-md hover:bg-green-600" %>
    &nbsp;
    <%= link_to "Back to Books", books_path, class: "px-4 py-2 bg-blue-600 font-bold text-white rounded-xl shadow-md hover:bg-blue-700" %>
  </div>
</div>
